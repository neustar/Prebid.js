<!-- copied from web_example.html and modified accordingly for neustar -->
<html>

<head>
  <link rel="icon" type="image/png" href="/favicon.png">
  <script async src="//www.googletagservices.com/tag/js/gpt.js"></script>
  <!--
  <script async src="//acdn.adnxs.com/prebid/not-for-prod/prebid.js"></script>
  -->
  <script async src="/build/dev/prebid.js"></script>
  <script>
    var div_1_sizes = [
      [300, 250],
      [300, 600]
    ];
    var div_2_sizes = [
      [728, 90],
      [970, 250]
    ];
    var PREBID_TIMEOUT = 10000;
    var FAILSAFE_TIMEOUT = 30000;

    /*
    var adUnits = [
      {
        code: '/19968336/header-bid-tag-0',
        mediaTypes: {
          banner: {
            sizes: div_1_sizes
          }
        },
        bids: [{
          bidder: 'appnexus',
          params: {
            placementId: 13144370
          }
        }]
      },
      {
        code: '/19968336/header-bid-tag-1',
        mediaTypes: {
          banner: {
            sizes: div_2_sizes
          }
        },
        bids: [{
          bidder: 'appnexus',
          params: {
            placementId: 13144370
          }
        }]
      }
    ];
    */

    var adUnits = [
      {
        code: 'test-div',
        sizes: [
          [300, 250],
          [728, 90]
        ],
        bids: [{
          bidder: 'pubmatic',
          params: {
            publisherId: '156209',               // required, must be wrapped in quotes
            oustreamAU: 'renderer_test_pubmatic',   // required if mediaTypes-> video-> context is 'outstream' and optional if renderer is defined in adUnits or in mediaType video. This value can be get by BlueBillyWig Team.
            adSlot: 'pubmatic_test2',            // optional
            pmzoneid: 'zone1, zone11',           // optional
            lat: '40.712775',                    // optional
            lon: '-74.005973',                   // optional
            yob: '1982',                         // optional
            kadpageurl: 'www.test.com',          // optional
            gender: 'M',                         // optional
            kadfloor: '0.50',                    // optional
            currency: 'AUD',                     // optional (Value configured only in the 1st adunit will be passed on. < br/> Values if present in subsequent adunits, will be ignored.)
            dctr: 'key1=123|key2=345',            // optional (Value configured only in the 1st adunit will be passed on. < br/> Values if present in subsequent adunits, will be ignored.)
            bcat: ['IAB1-5', 'IAB1-7'],                // Optional: Blocked IAB Categories. (Values from all slots will be combined and only unique values will be passed. An array of strings only. Each category should be a string of a length of more than 3 characters.)
            deals: ['deal-id-1', 'deal-id-200']   // optional: PMP Deals, should be array of strings
          }
        }]
      }];

    // ======== DO NOT EDIT BELOW THIS LINE =========== //
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    googletag.cmd.push(function() {
      googletag.pubads().disableInitialLoad();
    });

    var pbjs = pbjs || {};
    pbjs.que = pbjs.que || [];

    pbjs.que.push(function() {
      pbjs.addAdUnits(adUnits);
      /*
      pbjs.setConfig({
        userSync: {
          userIds: [
            {
              name: "neustarId",
              params: {
                sid: 789,
                hash: 'abc'
              },
              storage: {
                type: "cookie",
                name: "pbjs-neustarid",       // create a cookie with this name
                expires: 60                   // cookie can last for 60 days
              }
            }, {
              // This supplies it straight - no remote call
              name: "unifiedId",
              value: {"tdid": "D6885E90-2A7A-4E0F-87CB-7734ED1B99A3"}
            }
        ]}
      });
      */
      pbjs.setConfig({
        userSync: {
          userIds: [
            {
              // This supplies it straight - no remote call
              name: "unifiedId",
              value: {"tdid": "D6885E90-2A7A-4E0F-87CB-7734ED1B99A3"}
            }, {
              name: "fabrickId",
              params: {
                apiKey: '789',
                e: 'abc'
              },
              storage: {
                type: "cookie",
                name: "pbjs-neustarid",       // create a cookie with this name
                expires: 60                   // cookie can last for 60 days
              }
            }
          ]}
      });
      /*
      This does a remote call
      pbjs.setConfig({
        userSync: {
          userIds: [{
            name: "unifiedId",
            params: {
              url: "//match.adsrvr.org/track/rid?ttd_pid=MyTtidPid&fmt=json"
            },
            storage: {
              type: "cookie",
              name: "pbjs-unifiedid",       // create a cookie with this name
              expires: 60                   // cookie can last for 60 days
            }
          }],
          syncDelay: 3000              // 3 seconds after the first auction
        }
      });
      */
      pbjs.requestBids({
        bidsBackHandler: initAdserver,
        timeout: PREBID_TIMEOUT
      });
    });

    function initAdserver() {
      if (pbjs.initAdserverSet) return;
      pbjs.initAdserverSet = true;
      googletag.cmd.push(function() {
        pbjs.que.push(function() {
          pbjs.setTargetingForGPTAsync();
          googletag.pubads().refresh();
        });
      });
    }
    // in case PBJS doesn't load
    setTimeout(function() {
      initAdserver();
    }, FAILSAFE_TIMEOUT);

    /*
    googletag.cmd.push(function() {
      googletag.defineSlot('/19968336/header-bid-tag-0', div_1_sizes, 'div-1').addService(googletag.pubads());
      googletag.pubads().enableSingleRequest();
      googletag.enableServices();
    });
    googletag.cmd.push(function() {
      googletag.defineSlot('/19968336/header-bid-tag-1', div_2_sizes, 'div-2').addService(googletag.pubads());
      googletag.pubads().enableSingleRequest();
      googletag.enableServices();
    });
     */
    googletag.cmd.push(function() {
      googletag.defineSlot('test-div', div_2_sizes, 'div-2').addService(googletag.pubads());
      googletag.pubads().enableSingleRequest();
      googletag.enableServices();
    });

  </script>

</head>

<body>
<h2>Basic Prebid.js Example</h2>
<h5>Div-1</h5>
<div id='div-1'>
  <script type='text/javascript'>
    googletag.cmd.push(function() {
      googletag.display('div-1');
    });

  </script>
</div>

<br>

<h5>Div-2</h5>
<div id='div-2'>
  <script type='text/javascript'>
    googletag.cmd.push(function() {
      googletag.display('div-2');
    });

  </script>
</div>

</body>

</html>
